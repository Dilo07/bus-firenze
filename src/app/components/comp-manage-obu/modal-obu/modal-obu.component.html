<mat-card>
    <mat-card-title *ngIf="!data.obuId" fxLayout="row" fxLayoutAlign="center center">
        {{'OBU.ASSIGN' | translate}}
    </mat-card-title>
    <mat-card-title *ngIf="data.obuId" fxLayout="row" fxLayoutAlign="center center">
        {{'OBU.CHANGE' | translate}}
    </mat-card-title>
    <mat-card-content>
        <form [formGroup]="FormGroup" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20px">
            <div fxLayout="row wrap">
                <mat-form-field appearance="fill" fxFlex.gt-lg="82" fxFlex.gt-md="82" fxFlex.gt-xs="100" fxFlex="100">
                    <mat-label>Obu ID</mat-label>
                    <div fxLayout="row">
                        <input matInput type="text" formControlName="CtrlObuId" required maxlength="15"
                            pattern="^\d{15}$" (ngModelChange)="testObu()" autocomplete="off">
                        <mat-icon *ngIf="validObu === true" style="color: green;">check</mat-icon>
                        <button mat-icon-button *ngIf="validObu === false" (click)="cleanObu()">
                            <mat-icon>close</mat-icon>
                        </button>
                    </div>
                    <mat-error>{{'OBU.INSERT_OBU' | translate}}</mat-error>
                </mat-form-field>
                <button mat-icon-button (click)="enabledScanCode()">
                    <mat-icon matPrefix> {{ scannerEnabled ? 'videocam_off' : 'videocam' }}</mat-icon>
                </button>
            </div>
            <mat-progress-bar mode="indeterminate" *ngIf="!complete"></mat-progress-bar>
            <zxing-scanner *ngIf="scannerEnabled" #scanner (scanSuccess)="scanSuccessHandler($event)"
                [formats]="['QR_CODE', 'EAN_13', 'CODE_128', 'DATA_MATRIX']"></zxing-scanner>
            <p>{{selectedFile?.name}}</p>
            <div *ngIf="validObu && !data.obuId">
                <input style="display: none" type="file" #fileInput accept="application/pdf"
                (change)="uploadFile($event)">
                <button mat-raised-button color="primary" matTooltip="{{'OBU.UPLOAD_FILE' | translate}}"
                    (click)="fileInput.click()">
                    {{selectedFile?.name ? 'Change File' : 'Upload File'}}
                </button>
            </div>
            <div fxLayout="row" fxLayoutGap="20px">
                <button mat-button (click)="dialogRef.close(false);" class="backButton">
                    {{'COMMON.ACTION.CANCEL' | translate}}</button>
                <button *ngIf="data.obuId === undefined" mat-button [disabled]="!validObu" class="greenButtons"
                    (click)="addObu()">{{'COMMON.ACTION.SAVE' | translate}}</button>
                <button *ngIf="data.obuId !== undefined" mat-button [disabled]="!validObu" class="greenButtons"
                    (click)="changeObu()">{{'COMMON.ACTION.EDIT' | translate}}</button>
            </div>
        </form>
    </mat-card-content>
</mat-card>