<mat-card>
	<mat-card-title fxLayout="row" fxLayoutAlign="center center">Fleet Manager</mat-card-title>
	<mat-card-content>
		<div fxLayout="column" fxLayoutGap="20px">
			<span fxFlex="20">
				<button mat-button class="greenButtons" [routerLink]="['form-Fleet']"> nuovo </button>
			</span>
			<form [formGroup]="Search" fxLayout="row" fxLayoutAlign="left center" fxLayoutGap="20px">
				<mat-form-field appearance="fill" fxFlex="30">
					<mat-label>{{'FLEET-MANAGER.SEARCH' | translate}}</mat-label>
					<input matInput type="search" formControlName="CtrlSearch" autocomplete="off">
				</mat-form-field>
				<button mat-icon-button (click)="callGetFleetManager()">
					<mat-icon matPrefix>search</mat-icon>
				</button>
			</form>
			<mat-progress-bar mode="indeterminate" *ngIf="!complete"></mat-progress-bar>
			<table mat-table [dataSource]="fleetManagerList" style="background-color: beige;" class="mat-elevation-z8"
				matSort matSortActive="id" matSortDirection="asc">
				<ng-container matColumnDef="id">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> id </th>
					<td mat-cell *matCellDef="let element"> {{element.id}} </td>
				</ng-container>

				<ng-container matColumnDef="name">
					<th mat-header-cell *matHeaderCellDef> name </th>
					<td mat-cell *matCellDef="let element"> {{ element.name}} </td>
				</ng-container>

				<ng-container matColumnDef="surname">
					<th mat-header-cell *matHeaderCellDef> surname </th>
					<td mat-cell *matCellDef="let element"> {{ element.surname}} </td>
				</ng-container>

				<ng-container matColumnDef="e-mail">
					<th mat-header-cell *matHeaderCellDef> e-mail </th>
					<td mat-cell *matCellDef="let element"> {{ findContactValue(element, 3)}} </td>
				</ng-container>

				<ng-container matColumnDef="companyName">
					<th mat-header-cell *matHeaderCellDef> companyName </th>
					<td mat-cell *matCellDef="let element"> {{ element.companyName}} </td>
				</ng-container>

				<ng-container matColumnDef="city">
					<th mat-header-cell *matHeaderCellDef> city </th>
					<td mat-cell *matCellDef="let element"> {{ element.city}} </td>
				</ng-container>

				<ng-container matColumnDef="district">
					<th mat-header-cell *matHeaderCellDef> district </th>
					<td mat-cell *matCellDef="let element"> {{ element.district}} </td>
				</ng-container>

				<ng-container matColumnDef="actions">
					<th mat-header-cell *matHeaderCellDef> </th>
					<td mat-cell *matCellDef="let element" style="text-align: end;">
						<span *ngIf="manageFleet">
							<button mat-icon-button matTooltip="Edit" [routerLink]="['form-Fleet']" [state]="{fleetManager: element}">
								<mat-icon style="color: #0066CC;">edit</mat-icon>
							</button>
							<button mat-icon-button matTooltip="Cancella" (click)="deleteFleetManager(element.id)">
								<mat-icon style="color: red;">delete</mat-icon>
							</button>
							<button mat-icon-button matTooltip="Veicoli" [routerLink]="['vehicles']" [state]="{fleetManager: element}">
								<mat-icon style="color: #0066CC;">directions_car</mat-icon>
							</button>
							<button mat-icon-button matTooltip="Real time" [routerLink]="['../real-time']" [state]="{fleetManager: element}">
								<mat-icon style="color: #0066CC;">place</mat-icon>
							</button>
						</span>
						<span *ngIf="validFleet">
							<button mat-icon-button matTooltip="Valid" (click)="validateFleet(element.id, true)">
								<mat-icon style="color: green;">done</mat-icon>
							</button>
							<button mat-icon-button matTooltip="Rifiuta" (click)="validateFleet(element.id, false)">
								<mat-icon style="color: red;">clear</mat-icon>
							</button>
						</span>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"
					[style.display]="fleetManagerList.data.length === 0 ? 'none' : '' "></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
			<mat-paginator [style.display]="fleetManagerList.data.length === 0 ? 'none' : '' "
				[pageSizeOptions]="[10, 25, 50]" showFirstLastButtons></mat-paginator>
		</div>
	</mat-card-content>
</mat-card>