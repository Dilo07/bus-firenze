<mat-card>
    <mat-card-title fxLayout="row" fxLayoutAlign="center center">
        Nuovo veicolo
    </mat-card-title>
    <mat-card-content>
        <form [formGroup]="FormGroup" fxLayout="column" fxLayoutGap="20px">
            <div fxLayout="row wrap" fxLayoutGap="20px" fxLayoutAlign="start">
                <mat-form-field appearance="fill" fxFlex="100" fxFlex.gt-xs="100" fxFlex.gt-lg="40" fxFlex.gt-md="40">
                    <mat-label> {{'VEHICLE.LPN' | translate}}</mat-label>
                    <input *ngIf="!data.vehicle" matInput type="text" #input [value]="input.value.toUpperCase()"
                        formControlName="CtrlLpn" maxlength="20" autocomplete="off" required>
                    <input *ngIf="data.vehicle" matInput type="text" formControlName="CtrlLpn" style="opacity: 0.5" readonly>
                    <mat-error> {{'VEHICLE.INSERT LPN' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" fxFlex="100" fxFlex.gt-xs="100" fxFlex.gt-lg="40" fxFlex.gt-md="40">
                    <mat-label> {{'VEHICLE.LPN NAT' | translate}}</mat-label>
                    <mat-select formControlName="CtrlLpnNat" *ngIf="!data.vehicle" required>
                        <mat-option *ngFor="let nation of nations" [value]="nation.value">
                            <!-- selezione nazione -->
                            {{nation.value | translate}}
                            <span [ngClass]="'flag-icon flag-icon-' + nation.value.toLowerCase()"></span>
                        </mat-option>
                    </mat-select>
                    <span fxLayout="row" *ngIf="data.vehicle">
                        <!-- readonly nazione -->
                        <input matInput type="text" formControlName="CtrlLpnNat" style="opacity: 0.5" readonly>
                        <span [ngClass]="'flag-icon flag-icon-' + data.vehicle.lpnNat.toLowerCase()"></span>
                    </span>
                    <mat-error> {{'VEHICLE.INSERT LPN NAT' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="row wrap" fxLayoutGap="20px" fxLayoutAlign="start">
                <mat-form-field appearance="fill" fxFlex="100" fxFlex.gt-xs="100" fxFlex.gt-lg="30" fxFlex.gt-md="30">
                    <mat-label> {{'VEHICLE.EURO-CLASS' | translate}}</mat-label>
                    <input matInput type="number" formControlName="CtrlEuroClass" max="999" min="1" autocomplete="off"
                        required>
                    <mat-error *ngIf="FormGroup.controls.CtrlEuroClass.hasError('required')">
                        {{'VEHICLE.INSERT EURO-CLASS' | translate}}
                    </mat-error>
                    <mat-error *ngIf="FormGroup.controls.CtrlEuroClass.hasError('min')">
                        {{'VEHICLE.ERROR_NEGATIVE' | translate}}
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" fxFlex="100" fxFlex.gt-xs="100" fxFlex.gt-lg="30" fxFlex.gt-md="30">
                    <mat-label> {{'VEHICLE.AXIS' | translate}}</mat-label>
                    <input matInput type="number" formControlName="CtrlNumAxis" max="999999" min="1" autocomplete="off"
                        required>
                    <mat-error *ngIf="FormGroup.controls.CtrlNumAxis.hasError('required')">
                        {{'VEHICLE.INSERT AXIS' | translate}}</mat-error>
                    <mat-error *ngIf="FormGroup.controls.CtrlNumAxis.hasError('min')">
                        {{'VEHICLE.ERROR_NEGATIVE' | translate}}</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" fxFlex="100" fxFlex.gt-xs="100" fxFlex.gt-lg="30" fxFlex.gt-md="30">
                    <mat-label> {{'VEHICLE.WEIGHT' | translate}}</mat-label>
                    <input matInput type="number" formControlName="CtrlMaxWeight" max="999999" min="1" autocomplete="off"
                        required>
                    <mat-error *ngIf="FormGroup.controls.CtrlMaxWeight.hasError('required')">
                        {{'VEHICLE.INSERT WEIGHT' | translate}}</mat-error>
                    <mat-error *ngIf="FormGroup.controls.CtrlMaxWeight.hasError('min')">
                        {{'VEHICLE.ERROR_NEGATIVE' | translate}}</mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="20px">
                <button mat-button (click)="dialogRef.close(false);" class="backButton">
                    {{'COMMON.ACTION.BACK' | translate}}</button>
                <button *ngIf="!data.vehicle" mat-button [disabled]="FormGroup.invalid" class="greenButtons"
                    (click)="addVehicle()"> {{'COMMON.ACTION.SAVE' | translate}}</button>
                <button *ngIf="data.vehicle" mat-button [disabled]="FormGroup.invalid || !FormGroup.dirty" class="greenButtons"
                    (click)="updateVehicle()"> {{'COMMON.ACTION.EDIT' | translate}}</button>
            </div>
        </form>
    </mat-card-content>
</mat-card>